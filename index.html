<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Doggie Date App</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React and ReactDOM CDNs -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background-color: #f0f4f8;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    .card-animate {
      animation: fadeInUp 0.5s ease-out forwards;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px);}
      to { opacity: 1; transform: translateY(0);}
    }
    .modal-animate {
      animation: scaleIn 0.3s ease-out forwards;
    }
    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.9);}
      to { opacity: 1; transform: scale(1);}
    }
    .btn-main {
      font-weight: bold;
      padding: 0.5rem 1rem;
      border-radius: 9999px;
      box-shadow: 0 2px 6px rgba(50,50,93,.1);
      transition: all 0.2s;
    }
    .btn-main:hover {
      transform: scale(1.05);
    }
    .image-placeholder {
      background-color: #f3f4f6;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #6b7280;
      font-size: 0.9rem;
      text-align: center;
      border: 2px dashed #d1d5db;
    }
  </style>
</head>
<body>
  <noscript>
    <div style="text-align:center; color:red; font-weight:bold; margin:1em;">
      JavaScript is required to use Doggie Date!
    </div>
  </noscript>
  <div id="root"></div>
  <script>
    const { useState, useEffect } = React;

    // Demo Data
    const dummyDogs = [
      {
        id: 'dog1-dummy',
        name: 'Buddy',
        breed: 'Golden Retriever',
        age: 3,
        size: 'Large',
        energy: 'High',
        temperament: 'Friendly, playful',
        photos: [
          'https://placehold.co/400x300/AEC9FF/000?text=Buddy+1',
          'https://placehold.co/400x300/B2D8B2/000?text=Buddy+2',
        ],
        health_checkup: {
          date: '2025-01-15',
          status: 'Healthy, vaccinations up-to-date',
          details: 'Annual checkup, clear bill of health. Vaccinations: Rabies, DHPP. Dewormed. Next checkup due Jan 2026.',
        }
      },
      {
        id: 'dog2-dummy',
        name: 'Bella',
        breed: 'Poodle',
        age: 2,
        size: 'Medium',
        energy: 'Medium',
        temperament: 'Calm, smart',
        photos: [
          'https://placehold.co/400x300/FFDDC1/000?text=Bella+1',
          'https://placehold.co/400x300/FFEEDD/000?text=Bella+2',
        ],
        health_checkup: {
          date: '2024-11-20',
          status: 'Healthy, all clear',
          details: 'Regular checkup, no concerns. Vaccinations: Rabies, Bordetella. Microchipped. Next checkup due Nov 2025.',
        }
      },
      {
        id: 'dog3-dummy',
        name: 'Max',
        breed: 'German Shepherd',
        age: 4,
        size: 'Large',
        energy: 'High',
        temperament: 'Loyal, protective',
        photos: [
          'https://placehold.co/400x300/FFD6E0/000?text=Max+1',
        ],
        health_checkup: {
          date: '2025-02-10',
          status: 'Healthy',
          details: 'No issues, all shots current.',
        }
      },
    ];

    function getInitialState(key, fallback) {
      try {
        const stored = localStorage.getItem(key);
        return stored ? JSON.parse(stored) : fallback;
      } catch {
        return fallback;
      }
    }

    function setStoredState(key, value) {
      try {
        localStorage.setItem(key, JSON.stringify(value));
      } catch {}
    }

    function App() {
      // Swiping - remove liked/skipped dogs from stack
      const [dogStack, setDogStack] = useState(() =>
        getInitialState('dogStack', dummyDogs)
      );
      const [myDogProfile, setMyDogProfile] = useState(() =>
        getInitialState('myDogProfile', {
          name: '',
          breed: '',
          age: '',
          size: '',
          energy: '',
          temperament: '',
          photos: ['https://placehold.co/400x300/DDDDDD/666666?text=Upload+Photo'],
          health_checkup: { date: '', status: '', details: '' },
        })
      );
      const [myLikedDogs, setMyLikedDogs] = useState(() =>
        getInitialState('myLikedDogs', [])
      );
      const [view, setView] = useState('home');
      const [showHealthModal, setShowHealthModal] = useState(false);
      const [isEditingMyDog, setIsEditingMyDog] = useState(false);
      const [alertMessage, setAlertMessage] = useState(null);

      useEffect(() => {
        setStoredState('dogStack', dogStack);
      }, [dogStack]);
      useEffect(() => {
        setStoredState('myDogProfile', myDogProfile);
      }, [myDogProfile]);
      useEffect(() => {
        setStoredState('myLikedDogs', myLikedDogs);
      }, [myLikedDogs]);

      // Reset dogStack if empty to allow more swiping (demo)
      useEffect(() => {
        if (dogStack.length === 0) {
          setTimeout(() => setDogStack(dummyDogs), 1000);
        }
      }, [dogStack.length]);

      const currentDog = dogStack[0];

      function swipeLeft() {
        if (!currentDog) return;
        setDogStack(dogStack.slice(1));
      }

      function swipeRight() {
        if (!currentDog) return;
        setMyLikedDogs(prev => [...prev, currentDog.id]);
        setDogStack(dogStack.slice(1));
        setAlertMessage(`You liked ${currentDog.name}!`);
      }

      function handleMyDogProfileChange(e) {
        const { name, value } = e.target;
        if (name.startsWith('health_checkup.')) {
          setMyDogProfile(prev => ({
            ...prev,
            health_checkup: {
              ...prev.health_checkup,
              [name.split('.')[1]]: value
            }
          }));
        } else {
          setMyDogProfile(prev => ({ ...prev, [name]: value }));
        }
      }

      function saveMyDogProfile() {
        if (!myDogProfile.name || !myDogProfile.breed) {
          setAlertMessage("Please fill in your dog's name and breed.");
          return;
        }
        setStoredState('myDogProfile', myDogProfile);
        setIsEditingMyDog(false);
        setAlertMessage("Your dog's profile saved!");
      }

      // Components
      function DogProfileCard({ dog }) {
        return (
          <div className="bg-white rounded-xl shadow-lg p-6 max-w-sm mx-auto my-4 card-animate">
            <div className="relative h-64 w-full bg-gray-100 rounded-lg overflow-hidden mb-4 image-placeholder">
              <img
                src={dog.photos && dog.photos[0] ? dog.photos[0] : 'https://placehold.co/400x300/CCCCCC/000?text=Dog+Image+Error'}
                alt={dog.name}
                className="w-full h-full object-cover"
                onError={e => { e.target.onerror = null; e.target.src="https://placehold.co/400x300/CCCCCC/000?text=Dog+Image+Error";}}
              />
            </div>
            <h2 className="text-3xl font-bold text-center text-gray-800 mb-2">{dog.name}</h2>
            <p className="text-gray-600 text-center text-lg mb-4">{dog.breed}, {dog.age} years old</p>
            <div className="grid grid-cols-2 gap-3 text-sm text-gray-700 mb-4">
              <div>Size: {dog.size}</div>
              <div>Energy: {dog.energy}</div>
              <div className="col-span-2">Temperament: {dog.temperament}</div>
            </div>
            <div className="flex justify-center mt-6">
              <button
                onClick={() => setShowHealthModal(true)}
                className="btn-main bg-blue-500 hover:bg-blue-600 text-white"
              >View Health Checkup</button>
            </div>
          </div>
        );
      }

      function HealthCheckupModal({ dog, onClose }) {
        return (
          <div className="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50">
            <div className="bg-white rounded-xl shadow-2xl p-6 max-w-md w-full relative modal-animate">
              <button onClick={onClose}
                className="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-2xl font-bold"
              >&times;</button>
              <h3 className="text-2xl font-bold text-gray-800 mb-4 text-center">
                Health Checkup for {dog.name}
              </h3>
              {dog.health_checkup && dog.health_checkup.date ? (
                <>
                  <p className="text-gray-700 mb-2">
                    <span className="font-semibold">Last Checkup:</span> {dog.health_checkup.date}
                  </p>
                  <p className="text-gray-700 mb-2">
                    <span className="font-semibold">Status:</span> {dog.health_checkup.status}
                  </p>
                  <p className="text-gray-700 mb-4">
                    <span className="font-semibold">Details:</span> {dog.health_checkup.details}
                  </p>
                </>
              ) : (
                <p className="text-gray-700 mb-4 text-center">No health checkup details available.</p>
              )}
              <p className="text-sm text-gray-500 text-center italic">
                Disclaimer: Health information is provided by owners and should be verified independently.
              </p>
            </div>
          </div>
        );
      }

      function AlertModal({ message, onClose }) {
        return (
          <div className="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50">
            <div className="bg-white rounded-xl shadow-2xl p-6 max-w-xs w-full relative modal-animate">
              <h3 className="text-xl font-bold text-gray-800 mb-4 text-center">Notification</h3>
              <p className="text-gray-700 mb-6 text-center">{message}</p>
              <div className="flex justify-center">
                <button onClick={onClose} className="btn-main bg-indigo-500 hover:bg-indigo-600 text-white">OK</button>
              </div>
            </div>
          </div>
        );
      }

      // Main UI
      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 font-inter text-gray-900 flex flex-col items-center">
          <header className="w-full bg-white shadow-md py-4 px-6 flex flex-col sm:flex-row justify-between items-center rounded-b-xl z-10">
            <h1 className="text-3xl font-bold text-indigo-700 mb-2 sm:mb-0">Doggie Date</h1>
            <nav className="flex space-x-4">
              <button
                onClick={() => setView('home')}
                className={`px-4 py-2 rounded-full font-semibold transition-all duration-200 ${
                  view === 'home' ? 'bg-indigo-500 text-white shadow-lg' : 'text-gray-700 hover:bg-gray-100'
                }`}
              >Home</button>
              <button
                onClick={() => setView('profile')}
                className={`px-4 py-2 rounded-full font-semibold transition-all duration-200 ${
                  view === 'profile' ? 'bg-indigo-500 text-white shadow-lg' : 'text-gray-700 hover:bg-gray-100'
                }`}
              >My Profile</button>
            </nav>
          </header>

          <main className="flex-grow w-full max-w-2xl p-4">
            {alertMessage && <AlertModal message={alertMessage} onClose={() => setAlertMessage(null)} />}
            {view === 'home' && (
              <section className="text-center py-8">
                <h2 className="text-4xl font-extrabold text-gray-800 mb-6">Find Doggie Playdates!</h2>
                {dogStack.length > 0 && currentDog ? (
                  <>
                    <DogProfileCard dog={currentDog} />
                    <div className="flex justify-center space-x-6 mt-8">
                      <button
                        onClick={swipeLeft}
                        className="flex items-center justify-center bg-red-500 hover:bg-red-600 text-white text-xl p-4 rounded-full shadow-lg transition-all duration-300"
                        aria-label="Nope"
                      >
                        <svg className="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                          <path fillRule="evenodd" d="M10 8.586l4.95-4.95a1 1 0 111.414 1.415l-4.95 4.95 4.95 4.95a1 1 0 01-1.415 1.414l-4.95-4.95-4.95 4.95A1 1 0 012.636 15.121l4.95-4.95-4.95-4.95A1 1 0 014.05 2.636l4.95 4.95z" clipRule="evenodd"/>
                        </svg>
                      </button>
                      <button
                        onClick={swipeRight}
                        className="flex items-center justify-center bg-green-500 hover:bg-green-600 text-white text-xl p-4 rounded-full shadow-lg transition-all duration-300"
                        aria-label="Like"
                      >
                        <svg className="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                          <path d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656l-1.172 1.172L10 17.657l-5.656-5.657-1.172-1.172a4 4 0 010-5.656z"/>
                        </svg>
                      </button>
                    </div>
                    {showHealthModal && currentDog && (
                      <HealthCheckupModal dog={currentDog} onClose={() => setShowHealthModal(false)} />
                    )}
                  </>
                ) : (
                  <p className="text-gray-600 text-lg mt-12">No more dogs to swipe. Refreshing...</p>
                )}
              </section>
            )}
            {view === 'profile' && (
              <section className="text-center py-8">
                <h2 className="text-4xl font-extrabold text-gray-800 mb-6">Your Doggie Profile</h2>
                <div className="mt-8 p-6 bg-white rounded-xl shadow-lg max-w-md mx-auto card-animate">
                  {isEditingMyDog ? (
                    <>
                      <h3 className="text-2xl font-semibold text-gray-800 mb-4">Edit Your Dog's Profile</h3>
                      <div className="space-y-4 text-left">
                        <div>
                          <label htmlFor="name" className="block text-sm font-medium text-gray-700">Dog's Name</label>
                          <input type="text" id="name" name="name" value={myDogProfile.name}
                            onChange={handleMyDogProfileChange}
                            className="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                            placeholder="e.g., Sparky"/>
                        </div>
                        <div>
                          <label htmlFor="breed" className="block text-sm font-medium text-gray-700">Breed</label>
                          <input type="text" id="breed" name="breed" value={myDogProfile.breed}
                            onChange={handleMyDogProfileChange}
                            className="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                            placeholder="e.g., Labrador"/>
                        </div>
                        <div>
                          <label htmlFor="age" className="block text-sm font-medium text-gray-700">Age (Years)</label>
                          <input type="number" id="age" name="age" value={myDogProfile.age}
                            onChange={handleMyDogProfileChange}
                            className="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                            placeholder="e.g., 2"/>
                        </div>
                        <div>
                          <label htmlFor="size" className="block text-sm font-medium text-gray-700">Size</label>
                          <select id="size" name="size" value={myDogProfile.size}
                            onChange={handleMyDogProfileChange}
                            className="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="">Select Size</option>
                            <option value="Small">Small</option>
                            <option value="Medium">Medium</option>
                            <option value="Large">Large</option>
                            <option value="Giant">Giant</option>
                          </select>
                        </div>
                        <div>
                          <label htmlFor="energy" className="block text-sm font-medium text-gray-700">Energy Level</label>
                          <select id="energy" name="energy" value={myDogProfile.energy}
                            onChange={handleMyDogProfileChange}
                            className="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="">Select Energy</option>
                            <option value="Low">Low</option>
                            <option value="Medium">Medium</option>
                            <option value="High">High</option>
                          </select>
                        </div>
                        <div>
                          <label htmlFor="temperament" className="block text-sm font-medium text-gray-700">Temperament</label>
                          <textarea id="temperament" name="temperament" value={myDogProfile.temperament}
                            onChange={handleMyDogProfileChange} rows="3"
                            className="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                            placeholder="e.g., Playful, loves kids, a bit shy with new dogs."/>
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-2">Dog Photo</label>
                          <div className="flex justify-center items-center h-32 w-full bg-gray-100 rounded-md image-placeholder">
                            <span className="text-center">Click to upload (Coming Soon!)</span>
                          </div>
                          {myDogProfile.photos && myDogProfile.photos[0] && myDogProfile.photos[0] !== 'https://placehold.co/400x300/DDDDDD/666666?text=Upload+Photo' && (
                            <img src={myDogProfile.photos[0]} alt="Dog Profile" className="mt-2 mx-auto max-w-full h-auto rounded-md" />
                          )}
                        </div>
                        <h4 className="text-lg font-semibold text-gray-800 mt-6 mb-2">Health Checkup</h4>
                        <div>
                          <label htmlFor="health_checkup.date" className="block text-sm font-medium text-gray-700">Last Checkup Date</label>
                          <input type="date" id="health_checkup.date" name="health_checkup.date"
                            value={myDogProfile.health_checkup?.date || ''}
                            onChange={handleMyDogProfileChange}
                            className="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"/>
                        </div>
                        <div>
                          <label htmlFor="health_checkup.status" className="block text-sm font-medium text-gray-700">Health Status</label>
                          <input type="text" id="health_checkup.status" name="health_checkup.status"
                            value={myDogProfile.health_checkup?.status || ''}
                            onChange={handleMyDogProfileChange}
                            className="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                            placeholder="e.g., Healthy, Vaccinations up-to-date"/>
                        </div>
                        <div>
                          <label htmlFor="health_checkup.details" className="block text-sm font-medium text-gray-700">Health Details</label>
                          <textarea id="health_checkup.details" name="health_checkup.details"
                            value={myDogProfile.health_checkup?.details || ''}
                            onChange={handleMyDogProfileChange} rows="4"
                            className="mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                            placeholder="e.g., Annual checkup, all vaccinations current (Rabies, DHPP). No known allergies."/>
                        </div>
                      </div>
                      <div className="flex justify-between mt-6 space-x-4">
                        <button
                          onClick={saveMyDogProfile}
                          className="flex-1 btn-main bg-green-500 hover:bg-green-600 text-white"
                        >Save Profile</button>
                        <button
                          onClick={() => setIsEditingMyDog(false)}
                          className="flex-1 btn-main bg-gray-400 hover:bg-gray-500 text-white"
                        >Cancel</button>
                      </div>
                    </>
                  ) : (
                    <>
                      <h3 className="text-2xl font-semibold text-gray-800 mb-4">Your Dog's Current Profile</h3>
                      {myDogProfile.name ? (
                        <div className="space-y-3 text-left">
                          <img
                            src={myDogProfile.photos && myDogProfile.photos[0] ? myDogProfile.photos[0] : 'https://placehold.co/400x300/CCCCCC/000?text=No+Photo'}
                            alt={myDogProfile.name}
                            className="w-full h-48 object-cover rounded-lg mb-4 image-placeholder"
                            onError={e => { e.target.onerror = null; e.target.src="https://placehold.co/400x300/CCCCCC/000?text=No+Photo";}}
                          />
                          <p><span className="font-semibold">Name:</span> {myDogProfile.name}</p>
                          <p><span className="font-semibold">Breed:</span> {myDogProfile.breed}</p>
                          <p><span className="font-semibold">Age:</span> {myDogProfile.age} years</p>
                          <p><span className="font-semibold">Size:</span> {myDogProfile.size}</p>
                          <p><span className="font-semibold">Energy:</span> {myDogProfile.energy}</p>
                          <p><span className="font-semibold">Temperament:</span> {myDogProfile.temperament}</p>
                          <h4 className="font-semibold mt-4">Health Checkup:</h4>
                          {myDogProfile.health_checkup && myDogProfile.health_checkup.date ? (
                            <>
                              <p><span className="font-semibold text-sm">Last Checkup:</span> {myDogProfile.health_checkup.date}</p>
                              <p><span className="font-semibold text-sm">Status:</span> {myDogProfile.health_checkup.status}</p>
                              <p><span className="font-semibold text-sm">Details:</span> {myDogProfile.health_checkup.details}</p>
                            </>
                          ) : (
                            <p className="text-sm italic text-gray-500">No health details recorded.</p>
                          )}
                        </div>
                      ) : (
                        <p className="text-lg text-gray-700">You haven't created your dog's profile yet!</p>
                      )}
                      <button
                        onClick={() => setIsEditingMyDog(true)}
                        className="btn-main bg-purple-500 hover:bg-purple-600 text-white mt-6"
                      >{myDogProfile.name ? "Edit My Dog's Profile" : "Set Up My Dog's Profile"}</button>
                    </>
                  )}
                </div>
              </section>
            )}
          </main>
          <footer className="py-4 text-center text-gray-500 text-sm">
            &copy; 2025 Doggie Date | Demo - No backend required!
          </footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
